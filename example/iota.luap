
#define enum!(name, #...) =
  local name = (function()
    local o = {}
    local fields = { #...# }
    for i, field in pairs(fields) do
      o[i] = field
      o[field] = i
    end
    return o
  end)()
#end

enum!(Color; red, green, blue)

print(Color.red, Color.green, Color.blue)


